YUI.add("moodle-atto_linktext-button",function(e,t){var n="atto_linktext",r="atto_linktext",i="linktext_description",s="linktext_title",o={INPUTSUBMIT:"atto_media_urlentrysubmit",INPUTCANCEL:"atto_media_urlentrycancel",LINK:"link",TITLE:"title",DESCRIPTION:"description"},u={LINK:".link",TITLE:".title",DESCRIPTION:".description"},a='<form class="atto_form"><div id="{{elementid}}_{{innerform}}" class="mdl-align"><label for="{{elementid}}_{{LINK}}">{{get_string "enterlink" component}}</label><input class="{{CSS.LINK}}" id="{{elementid}}_{{LINK}}" name="{{elementid}}_{{LINK}}" value="" /><br /><label for="{{elementid}}_{{TITLE}}">{{get_string "entertitle" component}}</label><input class="{{CSS.TITLE}}" id="{{elementid}}_{{TITLE}}" name="{{elementid}}_{{TITLE}}" value="{{selectedtext}}" /><br /><label for="{{elementid}}_{{description}}">{{get_string "enterdesc" component}}</label><input class="{{CSS.DESCRIPTION}}" id="{{elementid}}_{{description}}" name="{{elementid}}_{{description}}" value="" /><br /><button class="{{CSS.INPUTSUBMIT}}">{{get_string "insert" component}}</button></div>icon: {{clickedicon}}</form>';e.namespace("M.atto_linktext").Button=e.Base.create("button",e.M.editor_atto.EditorPlugin,[],{_currentSelection:null,initializer:function(){if(this.get("disabled"))return;var t=["externallink"];e.Array.each(t,function(e){this.addButton({icon:"ed/"+e,iconComponent:"atto_linktext",buttonName:e,callback:this._displayDialogue,callbackArgs:e})},this)},_displayDialogue:function(t,r){t.preventDefault();var i=400,s=this.getDialogue({headerContent:M.util.get_string("dialogtitle",n),width:i+"px",focusAfterHide:r});s.width!==i+"px"&&s.set("width",i+"px");var o=this._getFormContent(r),u=e.Node.create("<div></div>");u.append(o),s.set("bodyContent",u),s.show(),this.markUpdated()},_getFormContent:function(t){this._currentSelection=this.get("host").getSelection();var r=e.Handlebars.compile(a),i=e.Node.create(r({elementid:this.get("host").get("elementid"),CSS:o,component:n,clickedicon:t,selectedtext:this._currentSelection}));return this._form=i,this._form.one("."+o.INPUTSUBMIT).on("click",this._doInsert,this),i},_doInsert:function(e){e.preventDefault(),this.getDialogue({focusAfterHide:null}).hide();var t=this._form.one(u.LINK),n=this._form.one(u.TITLE),r=this._form.one(u.DESCRIPTION),i=n.get("value");if(!t.get("value"))return;n.get("value")||(i=t.get("value"));var s="<a class='"+this.get("defaultlinkcss")+"'href='http://"+t.get("value")+"' target='_blank' title='"+r.get("value")+"'>"+i+"</a>";this.editor.focus(),this.get("host").insertContentAtFocusPoint(s),this.markUpdated()}},{ATTRS:{disabled:{value:!1},usercontextid:{value:null},defaultlinkcss:{value:""}}})},"@VERSION@",{requires:["moodle-editor_atto-plugin"]});
